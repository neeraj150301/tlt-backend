import{b as R}from"./chunk-ZD6YN5PI.js";import{a as C}from"./chunk-U6FASL5M.js";import{r as M}from"./chunk-FKNCLMEC.js";import{$ as h,$a as _,Ka as a,La as U,R as S,U as y,Va as b,Z as c,_ as m,aa as w,ab as k,bb as V,cb as T,db as e,eb as r,fb as u,ib as f,kb as p,lb as d,rb as s,sb as E,tb as g,xb as A}from"./chunk-S6POATRR.js";import"./chunk-CWTPBX7D.js";function P(o,l){if(o&1){let i=f();e(0,"div",4)(1,"div",5)(2,"div",6)(3,"span",7),h(),e(4,"svg",8),u(5,"path",9),r()(),w(),e(6,"div",10)(7,"strong",11),s(8," Changes saved "),r(),e(9,"p",12),s(10,"User is removed successfully."),r()(),e(11,"button",13),p("click",function(){c(i);let t=d();return m(t.showSuccessMessage=!1)}),e(12,"span",14),s(13,"Dismiss popup"),r(),h(),e(14,"svg",8),u(15,"path",15),r()()()()()}}function I(o,l){if(o&1){let i=f();e(0,"div",4)(1,"div",5)(2,"div",6)(3,"span",7),h(),e(4,"svg",8),u(5,"path",9),r()(),w(),e(6,"div",10)(7,"strong",11),s(8," Changes saved "),r(),e(9,"p",12),s(10,"Pin Reset Successful."),r()(),e(11,"button",13),p("click",function(){c(i);let t=d();return m(t.showSuccessMessage=!1)}),e(12,"span",14),s(13,"Dismiss popup"),r(),h(),e(14,"svg",8),u(15,"path",15),r()()()()()}}function j(o,l){o&1&&(e(0,"div",16)(1,"div"),s(2," NO USER AVAILABLE "),r()())}function W(o,l){if(o&1){let i=f();e(0,"div",17)(1,"div",18)(2,"div")(3,"h5",19),s(4),r(),e(5,"p",20)(6,"span",21),s(7),r()()(),e(8,"div",22)(9,"button",23),p("click",function(){let x=c(i).$implicit,v=d(2);return m(v.preResetPin(x))}),u(10,"span",24),e(11,"span",25),s(12," Reset Pin "),r()(),e(13,"button",26),p("click",function(){let x=c(i).$implicit,v=d(2);return m(v.preRemoveTltUser(x))}),u(14,"span",27),e(15,"span",25),s(16," Remove "),r()()()()()}if(o&2){let i=l.$implicit;a(4),g(" ",i.fullName," "),a(3),E(i.phoneNumber)}}function N(o,l){if(o&1){let i=f();u(0,"div",28),e(1,"div",29)(2,"div",30)(3,"h2",31),s(4),r(),e(5,"p",32),s(6),r(),e(7,"div",33)(8,"button",34),p("click",function(){c(i);let t=d(2);return m(t.removeTltUser(t.removeUser))}),s(9," Yes, I'm sure "),r(),e(10,"button",35),p("click",function(){c(i);let t=d(2);return m(t.showWarning=!1)}),s(11," No, go back "),r()()()()}if(o&2){let i=d(2);a(4),g("Are you sure you want to remove ",i.removeUser.fullName,"?"),a(2),g(" Doing this will remove ",i.removeUser.fullName," from TLT user list. Are you 100% sure? ")}}function L(o,l){if(o&1){let i=f();u(0,"div",28),e(1,"div",29)(2,"div",30)(3,"h2",31),s(4),r(),e(5,"p",32),s(6),r(),e(7,"div",33)(8,"button",34),p("click",function(){c(i);let t=d(2);return m(t.resetPin(t.resetPinUser))}),s(9," Yes, I'm sure "),r(),e(10,"button",35),p("click",function(){c(i);let t=d(2);return m(t.showResetWarning=!1)}),s(11," No, go back "),r()()()()}if(o&2){let i=d(2);a(4),g("Are you sure you want to reset Pin of ",i.resetPinUser.fullName,"?"),a(2),g(" Doing this will reset pin of ",i.resetPinUser.fullName,". Are you 100% sure? ")}}function $(o,l){if(o&1&&(V(0,W,17,2,"div",36,k),b(2,N,12,2)(3,L,12,2)),o&2){let i=d();T(i.Users),a(2),_(2,i.showWarning?2:-1),a(),_(3,i.showResetWarning?3:-1)}}var O=(()=>{let l=class l{constructor(n){this.userService=n,this.showSuccessMessage=!1,this.showResetPinSuccessMessage=!1,this.http=S(M),this.showWarning=!1,this.showResetWarning=!1,this.Users=[]}ngOnInit(){this.fetchtltUsers()}fetchtltUsers(){this.userService.getTltUsers().subscribe(n=>{this.Users=n.filter(t=>t.apps.includes("tlt"))})}preRemoveTltUser(n){this.removeUser=n,this.showWarning=!0}preResetPin(n){this.resetPinUser=n,this.showResetWarning=!0}resetPin(n){this.http.patch(`${C.apiBaseUrl}/api/auth/users/reset/${n._id}`,n._id).subscribe(t=>{}),this.showResetWarning=!1,this.showResetPinSuccessMessage=!0,setTimeout(()=>{this.showResetPinSuccessMessage=!1},2e3)}removeTltUser(n){n.apps=n.apps.filter(t=>t!=="tlt"),this.http.patch(`${C.apiBaseUrl}/api/auth/users/apps/${n._id}`,n).subscribe(t=>{}),this.showWarning=!1,this.showSuccessMessage=!0,setTimeout(()=>{this.showSuccessMessage=!1},2e3),this.fetchtltUsers()}};l.\u0275fac=function(t){return new(t||l)(U(R))},l.\u0275cmp=y({type:l,selectors:[["app-admin-view-user"]],standalone:!0,features:[A],decls:6,vars:3,consts:[[1,"sm:py-6","flex","justify-center"],[1,"px-4","sm:p-4","sm:ml-52","mt-2","w-full"],["class","flex justify-center"],["class","p-4 mt-4 border-2 border-gray-700 text-red-500  border-dashed rounded-lg dark:text-red-500 font-bold dark:border-gray-700 flex justify-center"],[1,"flex","justify-center"],["role","alert",1,"rounded-xl","border","border-gray-100","bg-white","p-4","w-96","mb-4"],[1,"flex","items-start","gap-4"],[1,"text-green-600"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","d","M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"flex-1"],[1,"block","font-medium","text-gray-900"],[1,"mt-1","text-sm","text-gray-700"],[1,"text-gray-500","transition","hover:text-gray-600",3,"click"],[1,"sr-only"],["stroke-linecap","round","stroke-linejoin","round","d","M6 18L18 6M6 6l12 12"],[1,"p-4","mt-4","border-2","border-gray-700","text-red-500","border-dashed","rounded-lg","dark:text-red-500","font-bold","dark:border-gray-700","flex","justify-center"],[1,"relative","flex","flex-col","mt-4","text-gray-700","bg-white","shadow-md","bg-clip-border","rounded-xl","w-full","border-2","border-gray-200","border-solid"],[1,"pt-2","pl-4","flex","justify-between","items-center"],[1,"block","mb-1","font-sans","text-xl","antialiased","font-semibold","leading-snug","tracking-normal","text-blue-gray-900"],[1,"block","font-sans","text-base","antialiased","font-light","leading-relaxed","text-inherit"],[1,"pb-1"],[1,"flex"],[1,"mb-2","mx-2","px-2","group","relative","inline-block","overflow-hidden","border","border-red-600","py-2","focus:outline-none","focus:ring",3,"click"],[1,"absolute","inset-y-0","left-0","w-[2px]","bg-red-600","transition-all","group-hover:w-full","group-active:bg-red-500"],[1,"relative","text-sm","font-medium","text-red-600","transition-colors","group-hover:text-white"],[1,"mx-4","mb-2","px-2","group","relative","inline-block","overflow-hidden","border","border-red-600","py-2","focus:outline-none","focus:ring",3,"click"],[1,"absolute","inset-y-0","right-0","w-[2px]","bg-red-600","transition-all","group-hover:w-full","group-active:bg-red-500"],[1,"fixed","inset-0","bg-black","opacity-50","z-40"],[1,"overflow-x-hidden","overflow-y-auto","fixed","inset-0","z-50","outline-none","focus:outline-none","justify-center","items-center","flex"],[1,"rounded-lg","bg-white","p-8","shadow-2xl"],[1,"text-lg","font-bold"],[1,"mt-2","text-sm","text-gray-500"],[1,"mt-4","flex","gap-2"],[1,"rounded","bg-green-50","px-4","py-2","text-sm","font-medium","text-green-600","hover:bg-green-100","hover:border","hover:border-green-700",3,"click"],[1,"rounded","bg-gray-50","px-4","py-2","text-sm","font-medium","text-gray-600","hover:border","hover:bg-gray-100","hover:border-slate-400",3,"click"],["class","relative flex flex-col mt-4 text-gray-700 bg-white shadow-md bg-clip-border rounded-xl w-full border-2 border-gray-200 border-solid"]],template:function(t,x){t&1&&(e(0,"div",0)(1,"div",1),b(2,P,16,0,"div",2)(3,I,16,0,"div",2)(4,j,3,0,"div",3)(5,$,4,2),r()()),t&2&&(a(2),_(2,x.showSuccessMessage?2:-1),a(),_(3,x.showResetPinSuccessMessage?3:-1),a(),_(4,x.Users.length===0?4:5))}});let o=l;return o})();export{O as AdminViewUserComponent};
