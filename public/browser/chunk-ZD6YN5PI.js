import{a as s}from"./chunk-U6FASL5M.js";import{r as a}from"./chunk-FKNCLMEC.js";import{Ha as o,L as n,Q as l,R as c}from"./chunk-S6POATRR.js";var h=(()=>{let r=class r{constructor(e){this.http=e,this.localStorageKey="auth",this.currentAuthData=o(void 0)}login(e,t){return this.http.post(`${s.apiBaseUrl}/api/auth/login`,{phoneNumber:e,pin:t})}saveAuthToStorage(e){localStorage.setItem(this.localStorageKey,JSON.stringify(e))}getAuthFromStorage(){let e=localStorage.getItem(this.localStorageKey);return e?JSON.parse(e):null}logout(){localStorage.removeItem(this.localStorageKey)}};r.\u0275fac=function(t){return new(t||r)(l(a))},r.\u0275prov=n({token:r,factory:r.\u0275fac,providedIn:"root"});let i=r;return i})();var j=(()=>{let r=class r{constructor(){this.authService=c(h),this.http=c(a),this.currentUser=o(null),this.userList=o([])}getUser(e){return this.http.get(`${s.apiBaseUrl}/api/auth/users/${e}`)}getTltUsers(){var e=this.http.get(`${s.apiBaseUrl}/api/auth/users`);return e}setCurrentUser(e){this.getUser(e).subscribe(t=>{let p={_id:t._id??"",phoneNumber:t.phoneNumber??"",fullName:t.fullName??"",isActive:t.isActive??!1,isDefaultPin:t.isActive??!1,isSuperAdmin:t.isSuperAdmin??!1,fcmToken:t.fcmToken??"",devices:t.devices??[],deviceHistory:t.deviceHistory??[],apps:t.apps??[],createdAt:t.createdAt??new Date,updatedAt:t.updatedAt??new Date};this.currentUser.set(p),console.log("helo",this.currentUser())},t=>{console.error(t.error)})}logout(){this.currentUser.set(null),this.authService.logout()}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=n({token:r,factory:r.\u0275fac,providedIn:"root"});let i=r;return i})();export{h as a,j as b};
